---
modes:
  - tidy: clear-download
  - tidy: clear-resources
  - tidy: copy-codes
  - tidy: create-podspec
  # - download
  # - xcassets
  - cocoapods

variables:
  version:
    fromGitBranch: false
    nextGitTag: true
    text:

cocoapods:
  trunk:
    isGithub: true
    repo: git@gitlab.dxy.net:ios-developer/ToDSpecs.git

# 下载模块
download:
  gits:
    - output: git_666
      input: https://github.com/migueldeicaza/TermKit
      branch: master
    - output: git_6667
      input: https://github.com/migueldeicaza/TermKit
      branch: master

# 文件整理模块
tidy:
  # 移除列表
  clears:
    - name: clear-download
      inputs:
        - git_666
        - git_6667
    - name: clear-resources
      inputs:
        - Sources
  # 移除列表
  copies:
    - name: copy-codes
      output: Sources/codes
      inputs:
        - codes
  create:
    - name: create-podspec
      output: autoasset.podspec
      text: |
            Pod::Spec.new do |s|
                s.name             = 'EmptyPage'
                s.version          = '4.0.4'
                s.summary          = 'iOS - 轻量级空白页占位图框架...'

                s.homepage         = 'https://github.com/linhay/EmptyPage'
                s.license          = { :type => 'MIT', :file => 'LICENSE' }
                s.author           = { 'linhay' => 'is.linhay@outlook.com' }
                s.source = { :git => 'https://github.com/linhay/EmptyPage.git', :tag => s.version.to_s }

                s.swift_version = ['4.0', '4.2', '5.0', '5.1']

                s.ios.deployment_target = '9.0'
                s.requires_arc = true

                s.subspec 'core' do |sp|
                    sp.source_files = ['Sources/core/*.{h,swift}', 'Sources/core/**/*.{h,swift}']
                end

            end
        

      
# 资源打包模块
xcassets: 
  template:
    output: ./Sources/codes

  colors:
    - output: ./Sources/Resources/colors.xcassets
      inputs:
        - ./UI/colors

  images:
    - output: ./Sources/Resources/icons.xcassets
      report: report/images.csv
      prefix: img_
      inputs:
        - ./UI/icon
    - output: ./Sources/Resources/icons_bundle.xcassets
      prefix: img_
      bundle_name: icons_bundle
      inputs:
        - ./UI/icon
  gifs:
    - output: ./Sources/Resources/gifs.xcassets
      prefix: gif_
      inputs:
        - ./UI/gifs
